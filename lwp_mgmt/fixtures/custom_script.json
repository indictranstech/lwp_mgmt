[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Salary Slip", 
  "modified": "2015-11-28 18:50:17.904443", 
  "name": "Salary Slip-Client", 
  "script": "frappe.ui.form.on(\"Salary Slip\", \"month\", function(frm,doc,dt,dn) {\n                 if('Management' in user_roles){\n          }\n    \n    frappe.call({\n        method:\"lwp_mgmt.config.lwp_calculate.auto_calculate_lwp\",\n        args:{\n            \"emp\":frm.doc.employee,\n            \"month\":frm.doc.month,\n            \"year\":frm.doc.fiscal_year,\n        },\n        callback: function(r) {\n          if (r.message!=false){  \n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"days_absent\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n          }\n          if (r.message==\"zero\"){  \n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - 0));\n            cur_frm.set_value(\"days_absent\", (frm.doc.total_days_in_month - 0));\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n          }\n        }\n\n      });\n});\nfrappe.ui.form.on(\"Salary Slip\", \"employee\", function(frm,doc,dt,dn) {\n                console.log(typeof user_roles);\n                 if('Management' in user_roles){\n              console.log('true');\n          }\n    if(frm.doc.employee){\n    frappe.call({\n        method:\"lwp_mgmt.config.lwp_calculate.auto_calculate_lwp\",\n        args:{\n            \"emp\":frm.doc.employee,\n            \"month\":frm.doc.month,\n            \"year\":frm.doc.fiscal_year,\n        },\n        callback: function(r) {\n          if (r.message!=false){  \n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"days_absent\", frm.doc.leave_without_pay);\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n          }\n          if (r.message==\"zero\"){  \n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - 0));\n            cur_frm.set_value(\"days_absent\", (frm.doc.total_days_in_month - 0));\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n          }\n        }\n\n      });\n}\n});\nfrappe.ui.form.on(\"Salary Slip\", \"refresh\", function(frm){\n    frappe.model.set_value(frm.doctype, frm.docname, 'days_absent', frm.doc.leave_without_pay);\n});", 
  "script_type": "Client"
 }
]